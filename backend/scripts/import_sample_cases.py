"""导入示例案件数据"""
import asyncio
import sys
from pathlib import Path
from datetime import date

# 添加项目根目录到 Python 路径
sys.path.insert(0, str(Path(__file__).parent.parent))

from app.db.database import AsyncSessionLocal
from app.models.models import Case


SAMPLE_CASES = [
    {
        "case_number": "（2023）京0105民初12345号",
        "title": "张三诉李四房屋买卖合同纠纷案",
        "court": "北京市朝阳区人民法院",
        "case_type": "民事",
        "judgment_date": date(2023, 6, 15),
        "content": """原告张三诉称：2022年3月，原告与被告签订《房屋买卖合同》，约定被告将其位于北京市朝阳区的房屋出售给原告，总价款300万元。原告已按约支付全部购房款，但被告拒不配合办理房屋过户手续。请求法院判令被告协助办理房屋过户手续。

被告李四辩称：原告所述不实，双方虽签订合同，但原告未按约定时间支付尾款，且房屋市场价格已上涨，原告应补足差价。

法院查明：2022年3月15日，原、被告签订《房屋买卖合同》，约定被告将其名下位于北京市朝阳区某小区的房屋出售给原告，总价款300万元，原告应于2022年4月30日前支付全部购房款。原告于2022年4月28日通过银行转账方式向被告支付了全部购房款300万元。此后，原告多次要求被告配合办理过户手续，被告以各种理由推脱。

本院认为：原、被告之间的房屋买卖合同合法有效，双方均应按约履行。原告已按约支付全部购房款，被告应当协助办理房屋过户手续。被告关于原告未按时支付尾款的辩称，与事实不符，本院不予采信。依照《中华人民共和国民法典》第五百零九条、第五百七十七条之规定，判决如下：

一、被告李四于本判决生效之日起十日内协助原告张三办理位于北京市朝阳区某小区房屋的过户手续；
二、驳回原告张三的其他诉讼请求。

案件受理费13800元，由被告李四负担。""",
        "parties": {
            "plaintiff": ["张三"],
            "defendant": ["李四"]
        },
        "legal_basis": [
            "《中华人民共和国民法典》第五百零九条",
            "《中华人民共和国民法典》第五百七十七条"
        ]
    },
    {
        "case_number": "（2023）沪0106民初23456号",
        "title": "王五诉赵六劳动合同纠纷案",
        "court": "上海市静安区人民法院",
        "case_type": "民事",
        "judgment_date": date(2023, 8, 20),
        "content": """原告王五诉称：原告于2020年1月入职被告公司，担任销售经理职务，月工资15000元。2023年3月，被告以业绩不佳为由违法解除劳动合同，未支付经济补偿金。请求法院判令被告支付违法解除劳动合同赔偿金90000元及拖欠工资30000元。

被告赵六公司辩称：原告在职期间多次违反公司规章制度，经警告无效后，公司依法解除劳动合同，不存在违法解除情形。

法院查明：原告于2020年1月1日入职被告公司，双方签订了为期三年的劳动合同。2023年3月15日，被告以原告业绩不达标为由，向原告发出《解除劳动合同通知书》。经查，被告未能提供充分证据证明原告存在严重违反规章制度的行为，也未能证明原告业绩不达标的具体情况。

本院认为：用人单位解除劳动合同应当具备法定理由，并履行法定程序。被告未能提供充分证据证明解除劳动合同的合法性，应当认定为违法解除劳动合同。依照《中华人民共和国劳动合同法》第四十八条、第八十七条之规定，判决如下：

一、被告赵六公司于本判决生效之日起十日内支付原告王五违法解除劳动合同赔偿金90000元；
二、被告赵六公司于本判决生效之日起十日内支付原告王五拖欠工资30000元；
三、驳回原告王五的其他诉讼请求。

案件受理费2300元，由被告赵六公司负担。""",
        "parties": {
            "plaintiff": ["王五"],
            "defendant": ["赵六公司"]
        },
        "legal_basis": [
            "《中华人民共和国劳动合同法》第四十八条",
            "《中华人民共和国劳动合同法》第八十七条"
        ]
    },
    {
        "case_number": "（2023）粤0106刑初34567号",
        "title": "人民检察院诉孙七盗窃案",
        "court": "广东省广州市天河区人民法院",
        "case_type": "刑事",
        "judgment_date": date(2023, 9, 10),
        "content": """广州市天河区人民检察院指控：2023年5月至6月期间，被告人孙七多次在广州市天河区某商场内盗窃他人财物，累计价值人民币50000元。

被告人孙七对指控的犯罪事实无异议。

法院查明：2023年5月至6月期间，被告人孙七利用在某商场工作的便利条件，多次盗窃商场内商品，包括手机、笔记本电脑等，累计价值人民币50000元。案发后，被告人孙七主动投案，如实供述犯罪事实，并退赔全部赃款。

本院认为：被告人孙七以非法占有为目的，秘密窃取他人财物，数额较大，其行为已构成盗窃罪。鉴于被告人孙七主动投案，如实供述犯罪事实，系自首，且退赔全部赃款，可以从轻处罚。依照《中华人民共和国刑法》第二百六十四条、第六十七条第一款之规定，判决如下：

一、被告人孙七犯盗窃罪，判处有期徒刑一年，缓刑二年，并处罚金人民币10000元；
二、责令被告人孙七退赔违法所得人民币50000元，发还被害人。

如不服本判决，可在接到判决书的第二日起十日内，通过本院或者直接向广东省广州市中级人民法院提出上诉。""",
        "parties": {
            "plaintiff": ["广州市天河区人民检察院"],
            "defendant": ["孙七"]
        },
        "legal_basis": [
            "《中华人民共和国刑法》第二百六十四条",
            "《中华人民共和国刑法》第六十七条第一款"
        ]
    },
    {
        "case_number": "（2023）浙0106民初45678号",
        "title": "周八诉吴九交通事故责任纠纷案",
        "court": "浙江省杭州市西湖区人民法院",
        "case_type": "民事",
        "judgment_date": date(2023, 7, 25),
        "content": """原告周八诉称：2023年4月10日，原告驾驶电动自行车正常行驶时，被告驾驶机动车违规变道，导致双方发生碰撞，原告受伤。交警部门认定被告负事故全部责任。原告因此次事故支付医疗费、误工费等共计80000元，请求法院判令被告赔偿。

被告吴九辩称：原告所述部分属实，但原告主张的赔偿金额过高，且部分费用与本次事故无关。

法院查明：2023年4月10日15时许，被告吴九驾驶小型轿车在杭州市西湖区某路段违规变道时，与原告周八驾驶的电动自行车发生碰撞，造成原告受伤。杭州市公安局交通警察支队西湖大队出具《道路交通事故认定书》，认定被告吴九负事故全部责任，原告周八无责任。原告因此次事故住院治疗15天，支付医疗费35000元、误工费20000元、护理费8000元、营养费3000元、交通费2000元，合计68000元。

本院认为：被告吴九违反道路交通安全法规，造成交通事故，应当承担赔偿责任。原告主张的医疗费、误工费、护理费、营养费、交通费等，有相应证据证明，本院予以支持。依照《中华人民共和国民法典》第一千一百七十九条、第一千一百八十四条之规定，判决如下：

一、被告吴九于本判决生效之日起十日内赔偿原告周八医疗费35000元、误工费20000元、护理费8000元、营养费3000元、交通费2000元，共计68000元；
二、驳回原告周八的其他诉讼请求。

案件受理费1600元，由被告吴九负担。""",
        "parties": {
            "plaintiff": ["周八"],
            "defendant": ["吴九"]
        },
        "legal_basis": [
            "《中华人民共和国民法典》第一千一百七十九条",
            "《中华人民共和国民法典》第一千一百八十四条"
        ]
    },
    {
        "case_number": "（2023）苏0106民初56789号",
        "title": "郑十诉钱十一离婚纠纷案",
        "court": "江苏省南京市鼓楼区人民法院",
        "case_type": "民事",
        "judgment_date": date(2023, 10, 15),
        "content": """原告郑十诉称：原、被告于2015年登记结婚，婚后育有一子。因双方性格不合，经常发生争吵，夫妻感情已完全破裂，请求法院判决离婚，并依法分割夫妻共同财产，孩子由原告抚养。

被告钱十一辩称：不同意离婚，夫妻感情尚未破裂，可以继续共同生活。如果法院判决离婚，孩子应由被告抚养。

法院查明：原、被告于2015年5月20日登记结婚，2016年8月生育一子郑某某。婚后初期，双方感情尚可，但近年来因家庭琐事经常发生争吵。2022年10月，原告搬离共同住所，双方开始分居。原告曾于2023年3月起诉离婚，本院判决不准离婚。此后，双方仍未和好，继续分居至今。

本院认为：原、被告虽系自愿登记结婚，但婚后因性格不合，经常发生矛盾，且已分居一年以上，夫妻感情确已破裂，调解无效，应准予离婚。关于子女抚养问题，考虑到孩子年龄较小，随母亲生活更为适宜，且原告具备抚养条件，故孩子由原告抚养为宜。依照《中华人民共和国民法典》第一千零七十九条、第一千零八十四条之规定，判决如下：

一、准予原告郑十与被告钱十一离婚；
二、婚生子郑某某由原告郑十抚养，被告钱十一每月支付抚养费3000元，至孩子年满十八周岁止；
三、夫妻共同财产依法分割：位于南京市鼓楼区的房产归原告郑十所有，原告郑十支付被告钱十一房产折价款800000元；存款200000元，原、被告各分得100000元。

案件受理费300元，由原、被告各负担150元。""",
        "parties": {
            "plaintiff": ["郑十"],
            "defendant": ["钱十一"]
        },
        "legal_basis": [
            "《中华人民共和国民法典》第一千零七十九条",
            "《中华人民共和国民法典》第一千零八十四条"
        ]
    }
]


async def import_cases():
    """导入示例案件"""
    async with AsyncSessionLocal() as db:
        try:
            for case_data in SAMPLE_CASES:
                case = Case(**case_data)
                db.add(case)

            await db.commit()
            print(f"✓ 成功导入 {len(SAMPLE_CASES)} 个示例案件")

        except Exception as e:
            await db.rollback()
            print(f"✗ 导入失败: {e}")
            raise


if __name__ == "__main__":
    asyncio.run(import_cases())
